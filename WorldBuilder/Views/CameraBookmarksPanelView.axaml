<UserControl
    x:Class="WorldBuilder.Views.CameraBookmarksPanelView"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:conv="clr-namespace:WorldBuilder.Lib.Converters"
    xmlns:i="using:Avalonia.Xaml.Interactivity"
    xmlns:ia="using:Avalonia.Xaml.Interactions.Core"
    xmlns:vm="using:WorldBuilder.ViewModels"
    x:CompileBindings="False"
    x:DataType="vm:CameraBookmarksPanelViewModel">

    <DockPanel LastChildFill="True">
        <StackPanel Orientation="Vertical">
            <TextBlock
                Margin="8,8,8,4"
                FontWeight="Bold"
                Text="Bookmarks" />

            <ScrollViewer MaxHeight="300">
                <ListBox
                    x:Name="BookmarkListBox"
                    ItemsSource="{Binding Bookmarks}"
                    ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                    SelectedItem="{Binding SelectedBookmark}">
                    <i:Interaction.Behaviors>
                        <ia:EventTriggerBehavior EventName="DoubleTapped">
                            <ia:InvokeCommandAction
                                Command="{Binding GoToBookmarkCommand}"
                                CommandParameter="{Binding #BookmarkListBox.SelectedItem}" />
                        </ia:EventTriggerBehavior>
                    </i:Interaction.Behaviors>
                    <ListBox.Styles>
                        <Style Selector="ListBoxItem">
                            <Setter Property="Padding" Value="8,4" />
                        </Style>
                    </ListBox.Styles>
                    <ListBox.ItemTemplate>
                        <DataTemplate x:DataType="vm:CameraBookmarkItem">
                            <DockPanel>
                                <TextBlock
                                    DockPanel.Dock="Right"
                                    FontSize="11"
                                    Foreground="{DynamicResource SystemBaseMediumColor}"
                                    Opacity="0.6"
                                    Text="{Binding Detail}"
                                    VerticalAlignment="Center" />
                                <StackPanel Orientation="Horizontal" Spacing="5">
                                    <TextBlock Text="ðŸ“" />
                                    <TextBlock Text="{Binding Name}" />
                                </StackPanel>
                            </DockPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                    <ListBox.ContextMenu>
                        <ContextMenu>
                            <MenuItem
                                Command="{Binding GoToBookmarkCommand}"
                                CommandParameter="{Binding #BookmarkListBox.SelectedItem}"
                                Header="Go To" />
                            <MenuItem
                                Command="{Binding UpdateBookmarkCommand}"
                                CommandParameter="{Binding #BookmarkListBox.SelectedItem}"
                                Header="Update to Current Position" />
                            <MenuItem
                                Command="{Binding RenameBookmarkCommand}"
                                CommandParameter="{Binding #BookmarkListBox.SelectedItem}"
                                Header="Rename" />
                            <Separator />
                            <MenuItem
                                Command="{Binding MoveUpCommand}"
                                CommandParameter="{Binding #BookmarkListBox.SelectedItem}"
                                Header="Move Up" />
                            <MenuItem
                                Command="{Binding MoveDownCommand}"
                                CommandParameter="{Binding #BookmarkListBox.SelectedItem}"
                                Header="Move Down" />
                            <Separator />
                            <MenuItem
                                Command="{Binding DeleteBookmarkCommand}"
                                CommandParameter="{Binding #BookmarkListBox.SelectedItem}"
                                Header="Delete" />
                        </ContextMenu>
                    </ListBox.ContextMenu>
                </ListBox>
            </ScrollViewer>

            <StackPanel
                Margin="5"
                HorizontalAlignment="Right"
                DockPanel.Dock="Top"
                Orientation="Horizontal"
                Spacing="5">
                <Button
                    Command="{Binding AddBookmarkCommand}"
                    Content="ðŸ“"
                    ToolTip.Tip="Bookmark Current Position (Ctrl+B)" />
                <Button
                    Command="{Binding GoToBookmarkCommand}"
                    CommandParameter="{Binding SelectedBookmark}"
                    Content="âžœ"
                    IsEnabled="{Binding SelectedBookmark, Converter={x:Static conv:ObjectConverters.IsNotNull}}"
                    ToolTip.Tip="Go To Selected Bookmark" />
                <Button
                    Command="{Binding DeleteBookmarkCommand}"
                    CommandParameter="{Binding SelectedBookmark}"
                    Content="ðŸ—‘ï¸"
                    IsEnabled="{Binding SelectedBookmark, Converter={x:Static conv:ObjectConverters.IsNotNull}}"
                    ToolTip.Tip="Delete Selected Bookmark" />
            </StackPanel>
        </StackPanel>
    </DockPanel>
</UserControl>
